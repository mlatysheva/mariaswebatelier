"use strict";(self.webpackChunkmaria_webatelier=self.webpackChunkmaria_webatelier||[]).push([[453],{7453:(e,n,a)=>{a.r(n),a.d(n,{default:()=>V});var r,t=a(5893),o=a(7294),l=a(2327),i=a(7310);!function(e){e.INCORRECT_USER_DATA="Please enter first and last names",e.INCORRECT_NAME_LENGTH="Name should be at least two characters long",e.INCORRECT_AGE="Please enter correct age",e.INCORRECT_AGE_RANGE="Age should be between 16 and 90 years old",e.INCORRECT_COUNTRY="Please select country from the list",e.NO_DATA="Please fill in the profile",e.SERVER_ERROR="Server error"}(r||(r={}));var c=a(7168),u=(0,c.hg)("profile/fetchProfileData",(function(e,n){return a=void 0,r=void 0,o=function(){var a,r,t,o;return function(e,n){var a,r,t,o,l={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,r&&(t=2&o[0]?r.return:o[0]?r.throw||((t=r.return)&&t.call(r),0):r.next)&&!(t=t.call(r,o[1])).done)return t;switch(r=0,t&&(o=[2&o[0],t.value]),o[0]){case 0:case 1:t=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!((t=(t=l.trys).length>0&&t[t.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!t||o[1]>t[0]&&o[1]<t[3])){l.label=o[1];break}if(6===o[0]&&l.label<t[1]){l.label=t[1],t=o;break}if(t&&l.label<t[2]){l.label=t[2],l.ops.push(o);break}t[2]&&l.ops.pop(),l.trys.pop();continue}o=n.call(e,l)}catch(e){o=[6,e],r=0}finally{a=t=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}(this,(function(l){switch(l.label){case 0:a=n.extra,r=n.rejectWithValue,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,a.api.get("/profile/".concat(e))];case 2:if(!(t=l.sent()).data)throw new Error;return[2,t.data];case 3:return o=l.sent(),console.error(o),[2,r("Incorrect login or password")];case 4:return[2]}}))},new((t=void 0)||(t=Promise))((function(e,n){function l(e){try{c(o.next(e))}catch(e){n(e)}}function i(e){try{c(o.throw(e))}catch(e){n(e)}}function c(n){var a;n.done?e(n.value):(a=n.value,a instanceof t?a:new t((function(e){e(a)}))).then(l,i)}c((o=o.apply(a,r||[])).next())}));var a,r,t,o})),s=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.form},f=(0,c.hg)("profile/updateProfileData",(function(e,n){return a=void 0,t=void 0,l=function(){var e,a,t,o,l,i,c;return function(e,n){var a,r,t,o,l={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,r&&(t=2&o[0]?r.return:o[0]?r.throw||((t=r.return)&&t.call(r),0):r.next)&&!(t=t.call(r,o[1])).done)return t;switch(r=0,t&&(o=[2&o[0],t.value]),o[0]){case 0:case 1:t=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!((t=(t=l.trys).length>0&&t[t.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!t||o[1]>t[0]&&o[1]<t[3])){l.label=o[1];break}if(6===o[0]&&l.label<t[1]){l.label=t[1],t=o;break}if(t&&l.label<t[2]){l.label=t[2],l.ops.push(o);break}t[2]&&l.ops.pop(),l.trys.pop();continue}o=n.call(e,l)}catch(e){o=[6,e],r=0}finally{a=t=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}(this,(function(u){switch(u.label){case 0:if(e=n.extra,a=n.rejectWithValue,t=n.getState,o=s(t()),(l=function(e){if(!e)return[r.NO_DATA];var n=e.firstname,a=e.lastname,t=e.age,o=e.country,l=[];return n&&a||l.push(r.INCORRECT_USER_DATA),(n&&n.length<2||a&&a.length<2)&&l.push(r.INCORRECT_NAME_LENGTH),o||l.push(r.INCORRECT_COUNTRY),t&&Number.isInteger(t)||l.push(r.INCORRECT_AGE),(t&&t<16||t&&t>90)&&l.push(r.INCORRECT_AGE_RANGE),l}(o)).length)return[2,a(l)];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,e.api.put("/profile",o)];case 2:if(!(i=u.sent()).data)throw new Error;return[2,i.data];case 3:return c=u.sent(),console.error(c),[2,a([r.SERVER_ERROR])];case 4:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,n){function r(e){try{c(l.next(e))}catch(e){n(e)}}function i(e){try{c(l.throw(e))}catch(e){n(e)}}function c(n){var a;n.done?e(n.value):(a=n.value,a instanceof o?a:new o((function(e){e(a)}))).then(r,i)}c((l=l.apply(a,t||[])).next())}));var a,t,o,l})),d=function(){return d=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},d.apply(this,arguments)},v=(0,c.oM)({name:"profile",initialState:{isLoading:!1,readonly:!0,error:void 0,data:void 0},reducers:{setReadonly:function(e,n){e.readonly=n.payload},cancelEdit:function(e){e.readonly=!0,e.validateErrors=void 0,e.form=e.data},updateProfile:function(e,n){e.form=d(d({},e.form),n.payload)}},extraReducers:function(e){e.addCase(u.pending,(function(e){e.error=void 0,e.isLoading=!0})).addCase(u.fulfilled,(function(e,n){e.isLoading=!1,e.data=n.payload,e.form=n.payload})).addCase(u.rejected,(function(e,n){e.isLoading=!1,e.error=n.payload})).addCase(f.pending,(function(e){e.validateErrors=void 0,e.isLoading=!0})).addCase(f.fulfilled,(function(e,n){e.isLoading=!1,e.data=n.payload,e.form=n.payload,e.readonly=!0})).addCase(f.rejected,(function(e,n){e.isLoading=!1,e.validateErrors=n.payload}))}}),h=v.actions,p=v.reducer,y=a(3504),m=a(5148),g=a(148),C=a(370),R=a(9021);const b={ProfileCard:"wW9jgKKD",input:"ZTyX8_n9",loading:"t07ZxFGs",error:"i5YK3SSb",editing:"DjTe7269"};var N;!function(e){e.RUB="RUB",e.EUR="EUR",e.USD="USD"}(N||(N={}));var E=function(){return E=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},E.apply(this,arguments)},x=(0,o.memo)((function(e){var n=e.className,a=e.label,r=e.options,l=e.value,i=e.readonly,c=e.onChange,u=(0,o.useMemo)((function(){return null==r?void 0:r.map((function(e){return(0,t.jsx)("option",E({className:"JkXz98qY",value:e.value},{children:e.content}),e.value)}))}),[r]);return(0,t.jsxs)("div",E({className:(0,y.A)("cidfdn6H",{},[n])},{children:[a&&(0,t.jsx)("span",E({className:"G1uuf7Bp"},{children:"".concat(a," >")})),(0,t.jsx)("select",E({className:"VOKOuKGo",value:l,disabled:i,onChange:function(e){null==c||c(e.target.value)}},{children:u}))]}))}));var j,O=[{value:N.EUR,content:N.EUR},{value:N.RUB,content:N.RUB},{value:N.USD,content:N.USD}],_=(0,o.memo)((function(e){var n,a=e.className,r=e.value,i=e.onChange,c=e.readonly,u=(0,l.$)().t,s=((n={}).yffCCLXx=c,n),f=(0,o.useCallback)((function(e){null==i||i(e)}),[i]);return(0,t.jsx)(x,{className:(0,y.A)("",s,[a]),label:u("indicate_currency"),options:O,value:r,onChange:f,readonly:c})}));!function(e){e.Russia="Russia",e.Ukraine="Ukraine",e.Belarus="Belarus",e.Kazakhstan="Kazakhstan",e.Armenia="Armenia",e.Germany="Germany"}(j||(j={}));var A=[{value:j.Armenia,content:j.Armenia},{value:j.Belarus,content:j.Belarus},{value:j.Germany,content:j.Germany},{value:j.Kazakhstan,content:j.Kazakhstan},{value:j.Russia,content:j.Russia},{value:j.Ukraine,content:j.Ukraine}],w=(0,o.memo)((function(e){var n,a=e.className,r=e.value,i=e.onChange,c=e.readonly,u=(0,l.$)().t,s=((n={}).ThGBPtIf=c,n),f=(0,o.useCallback)((function(e){null==i||i(e)}),[i]);return(0,t.jsx)(x,{className:(0,y.A)("",s,[a]),label:u("indicate_country"),options:A,value:r,onChange:f,readonly:c})})),T=function(){return T=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},T.apply(this,arguments)},P=function(e){var n,a,r=e.className,o=e.data,i=e.error,c=e.isLoading,u=e.readonly,s=e.onChangeFirstname,f=e.onChangeLastname,d=e.onChangeAge,v=e.onChangeCity,h=e.onChangeUsername,p=e.onChangeAvatar,N=e.onChangeCurrency,E=e.onChangeCountry,x=(0,l.$)("profile").t;if(c)return(0,t.jsx)("div",T({className:(0,y.A)(b.ProfileCard,(n={},n[b.loading]=!0,n),[r])},{children:(0,t.jsx)(C.$,{})}));if(i)return(0,t.jsx)("div",T({className:(0,y.A)(b.ProfileCard,{},[r,b.error])},{children:(0,t.jsx)(m.xv,{theme:m.lg.ERROR,title:x("profile_loading_error"),text:x("reload_page"),align:m.PH.CENTER})}));var j=((a={})[b.editing]=!u,a);return(0,t.jsx)("div",T({className:(0,y.A)(b.ProfileCard,j,[r])},{children:(0,t.jsxs)("div",T({className:b.data},{children:[(null==o?void 0:o.avatar)&&(0,t.jsx)("div",T({className:b.avatarWrapper},{children:(0,t.jsx)(R.q,{src:o.avatar})})),(0,t.jsx)(g.I,{className:b.input,value:null==o?void 0:o.firstname,placeholder:x("your_name"),onChange:s,readonly:u}),(0,t.jsx)(g.I,{className:b.input,value:null==o?void 0:o.lastname,placeholder:x("your_lastname"),onChange:f,readonly:u}),(0,t.jsx)(g.I,{className:b.input,value:null==o?void 0:o.age,placeholder:x("your_age"),onChange:d,readonly:u}),(0,t.jsx)(g.I,{className:b.input,value:null==o?void 0:o.city,placeholder:x("your_city"),onChange:v,readonly:u}),(0,t.jsx)(g.I,{className:b.input,value:null==o?void 0:o.username,placeholder:x("enter_username"),onChange:h,readonly:u}),(0,t.jsx)(g.I,{className:b.input,value:null==o?void 0:o.avatar,placeholder:x("enter_avatar"),onChange:p,readonly:u}),(0,t.jsx)(_,{className:b.input,value:null==o?void 0:o.currency,onChange:N,readonly:u}),(0,t.jsx)(w,{className:b.input,value:null==o?void 0:o.country,onChange:E,readonly:u})]}))}))},I=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.error},k=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.isLoading},U=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.readonly},L=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.validateErrors},G=a(2815),S=a(9704),B=a(6974),D=a(2503);const z="BhB8TYZR";var M=function(){return M=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},M.apply(this,arguments)},F=function(e){var n=e.className,a=(0,l.$)("profile").t,r=(0,S.v9)(U),i=(0,G.T)(),c=(0,o.useCallback)((function(){i(h.setReadonly(!1))}),[i]),u=(0,o.useCallback)((function(){i(h.cancelEdit())}),[i]),s=(0,o.useCallback)((function(){i(f())}),[i]);return(0,t.jsxs)("div",M({className:(0,y.A)("Iro3Y5lO",{},[n])},{children:[(0,t.jsx)("h1",M({className:"hero-text"},{children:a("profile")})),r?(0,t.jsx)(D.zx,M({theme:D.bn.OUTLINE,className:z,size:D.qE.L,onClick:c},{children:a("edit")})):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(D.zx,M({theme:D.bn.OUTLINE_ACCENT,className:z,size:D.qE.L,onClick:u},{children:a("cancel")})),(0,t.jsx)(D.zx,M({theme:D.bn.OUTLINE,className:"EGwjEvlI",size:D.qE.L,onClick:s},{children:a("save")}))]})]}))},K=a(6244),q=function(){return q=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},q.apply(this,arguments)},H={profile:p};const V=function(e){e.className;var n,a=(0,l.$)("profile").t,c=(0,G.T)(),f=(0,S.v9)(s),d=(0,S.v9)(I),v=(0,S.v9)(k),p=(0,S.v9)(U),y=(0,S.v9)(L),g=(0,B.UO)().id,C=((n={})[r.INCORRECT_AGE]=a("incorrect_age"),n[r.INCORRECT_AGE_RANGE]=a("incorrect_age_range"),n[r.INCORRECT_COUNTRY]=a("incorrect_country"),n[r.INCORRECT_NAME_LENGTH]=a("incorrect_name_length"),n[r.INCORRECT_USER_DATA]=a("incorrect_name"),n[r.NO_DATA]=a("no_data"),n[r.SERVER_ERROR]=a("server_error"),n);(0,K.Q)((function(){g&&c(u(g))}));var R=(0,o.useCallback)((function(e){c(h.updateProfile({firstname:e||""}))}),[c]),b=(0,o.useCallback)((function(e){c(h.updateProfile({lastname:e||""}))}),[c]),N=(0,o.useCallback)((function(e){c(h.updateProfile({age:Number(e||0)}))}),[c]),E=(0,o.useCallback)((function(e){c(h.updateProfile({city:e||""}))}),[c]),x=(0,o.useCallback)((function(e){c(h.updateProfile({username:e||""}))}),[c]),j=(0,o.useCallback)((function(e){c(h.updateProfile({avatar:e||""}))}),[c]),O=(0,o.useCallback)((function(e){c(h.updateProfile({currency:e||"RUB"}))}),[c]),_=(0,o.useCallback)((function(e){c(h.updateProfile({country:e||"Russia"}))}),[c]);return(0,t.jsxs)(i.W,q({reducers:H,removeAfterUnmount:!0},{children:[(0,t.jsx)(F,{}),(null==y?void 0:y.length)&&y.map((function(e){return(0,t.jsx)(m.xv,{theme:m.lg.ERROR,text:C[e]},e)})),(0,t.jsx)(P,{data:f,isLoading:v,readonly:p,error:d,onChangeFirstname:R,onChangeLastname:b,onChangeAge:N,onChangeCity:E,onChangeUsername:x,onChangeAvatar:j,onChangeCurrency:O,onChangeCountry:_})]}))}},7310:(e,n,a)=>{a.d(n,{W:()=>l});var r=a(5893),t=a(7294),o=a(9704),l=function(e){var n=e.children,a=e.reducers,l=e.removeAfterUnmount,i=void 0===l||l,c=(0,o.oR)(),u=(0,o.I0)();return(0,t.useEffect)((function(){return Object.entries(a).forEach((function(e){var n=e[0],a=e[1];c.reducerManager.add(n,a),u({type:"@INIT ".concat(n," reducer")})})),function(){i&&Object.entries(a).forEach((function(e){var n=e[0];c.reducerManager.remove(n),u({type:"@DELETE ".concat(n," reducer")})}))}}),[]),(0,r.jsx)(r.Fragment,{children:n})}},2815:(e,n,a)=>{a.d(n,{T:()=>t});var r=a(9704),t=function(){return(0,r.I0)()}},6244:(e,n,a)=>{a.d(n,{Q:()=>t});var r=a(7294);function t(e){(0,r.useEffect)((function(){e()}),[])}},9021:(e,n,a)=>{a.d(n,{q:()=>l});var r=a(5893),t=a(7294),o=a(3504);var l=function(e){var n=e.className,a=e.src,l=e.size,i=e.alt,c=(0,t.useMemo)((function(){return{width:l||100,height:l||100}}),[l]);return(0,r.jsx)("img",{src:a,className:(0,o.A)("ZqPdwJxd",{},[n]),style:c,alt:i})}},148:(e,n,a)=>{a.d(n,{I:()=>i});var r=a(5893),t=a(7294),o=a(3504);var l=function(){return l=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},l.apply(this,arguments)},i=(0,t.memo)((function(e){var n,a=e.className,i=e.value,c=e.onChange,u=e.type,s=void 0===u?"text":u,f=e.placeholder,d=e.autofocus,v=e.readonly,h=function(e,n){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var t=0;for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)n.indexOf(r[t])<0&&Object.prototype.propertyIsEnumerable.call(e,r[t])&&(a[r[t]]=e[r[t]])}return a}(e,["className","value","onChange","type","placeholder","autofocus","readonly"]),p=(0,t.useState)(!1),y=p[0],m=p[1],g=(0,t.useState)(0),C=g[0],R=g[1],b=(0,t.useRef)(null),N=y&&!v;(0,t.useEffect)((function(){var e;d&&(m(!0),null===(e=b.current)||void 0===e||e.focus())}),[d]);var E=((n={}).fTN1PnWu=v,n);return(0,r.jsxs)("div",l({className:(0,o.A)("LuFDUWoP",E,[a||""])},{children:[f&&(0,r.jsx)("div",l({className:"emAQQ85i"},{children:"".concat(f," >")})),(0,r.jsxs)("div",l({className:"y1GiFC_L"},{children:[(0,r.jsx)("input",l({ref:b,type:s,value:i,onChange:function(e){null==c||c(e.target.value),R(e.target.value.length)},className:"LVdIPwcx",onFocus:function(){m(!0)},onBlur:function(){m(!1)},onSelect:function(e){var n;R((null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.selectionStart)||0)},readOnly:v},h)),N&&(0,r.jsx)("span",{className:"lqMFGBuL",style:{left:"".concat(8*C,"px")}})]}))]}))}))},5148:(e,n,a)=>{a.d(n,{xv:()=>f,PH:()=>c,yH:()=>u,lg:()=>i});var r=a(5893),t=a(7294),o=a(3504);const l={title:"ikI7VPeL",text:"uNJeeCm1",error:"F9oLXAK4",hero:"DBD9ADc5",left:"dBqPIG8f",right:"j4UBrvei",center:"iJw6m2iu",size_m:"AOVZBfas",size_l:"U6JpO11Q"};var i,c,u,s=function(){return s=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},s.apply(this,arguments)};!function(e){e.PRIMARY="primary",e.ERROR="error",e.HERO="hero"}(i||(i={})),function(e){e.RIGHT="right",e.LEFT="left",e.CENTER="center"}(c||(c={})),function(e){e.M="size_m",e.L="size_l"}(u||(u={}));var f=(0,t.memo)((function(e){var n,a=e.className,t=e.title,f=e.text,d=e.theme,v=void 0===d?i.PRIMARY:d,h=e.align,p=void 0===h?c.LEFT:h,y=e.size,m=void 0===y?u.M:y,g=((n={})[l[v]]=!0,n[l[p]]=!0,n[l[m]]=!0,n);return(0,r.jsxs)("div",s({className:(0,o.A)(l.Text,g,[a||""])},{children:[t&&(0,r.jsx)("p",s({className:l.title},{children:t})),f&&(0,r.jsx)("p",s({className:l.text},{children:f}))]}))}))}}]);